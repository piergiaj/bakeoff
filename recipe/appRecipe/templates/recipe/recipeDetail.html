{% extends "recipe/base.html" %}

{% block title %}{{ recipe.name}}{% endblock title %}

{% block content %}
  <div class="row-fluid">
    <div class="span4">
      {% if recipe.recipepicture_set.count > 1 %}
        <div id="myCarousel" class="carousel slide">
          <div class="carousel-inner">
            <div class="active item">
              <img src="{{ recipe.mainPicture.path }}" alt="Main Recipe Picture">
            </div>
            {% for picture in recipe.recipepicture_set.all %}
              {% if picture != recipe.mainPicture %}
                <div class="item">
                  <img src="{{ picture.path }}" alt="Recipe Picture" />
                </div>
              {% endif %}
            {% endfor %}
          </div>
          <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
          <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
        </div>
      {% else %}
        <img src="{{ recipe.mainPicture.path }}" alt="Main Recipe Picture">
      {% endif %}
    </div>
    <div class="span4">
      <div class="row-fluid">
        <div class="span12">
          <h1>{{ recipe.name }}</h1>
        </div>
      </div>
      <div class="row-fluid">
        <div class="span12">
          <p>"{{ recipe.chefComment }}" - <a href="{% url 'chefDetail' recipe.chef.id %}">{{ recipe.chef.username }}</a></p>
          <p>{% include "recipe/starRating.html" with value=recipe.averageRating disabled="disabled" name="mainStar" only %}</p>
        </div>
      </div>
    </div>
    <div class="span4">
      <h4>Prep Time</h4>
      <p>{{ recipe.prepTimeString }}</p>
      <h4>Cook Time</h4>
      <p>{{ recipe.cookTimeString }}</p>
      <h4>Total Time</h4>
      <p>{{ recipe.totalTimeString }}</p>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span12">
      <h2>Ingredients</h2>
      <ul>
      {% for ri in recipe.recipeingredient_set.all %}
        <li>{{ ri.amount }} {{ ri.unit.name }}{{ ri.amount|pluralize }} of {{ ri.ingredient.name }}</li>
      {% endfor %}
      </ul>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span12">
      <h2>Instructions</h2>
      {% if recipe.instruction_set.all %}
        <ol>
        {% for ri in recipe.instruction_set.all %}
          <li>{{ ri.text }}</li>
        {% endfor %}
        </ol>
      {% else %}
      <p>No instructions.</p>
      {% endif %}
    </div>
  </div>
  <div class="row-fluid">
    <div class="span12">
      <h2>Reviews</h2>
      {% for review in recipe.review_set.all %}
        {% include "recipe/reviewMediaObject.html" with review=review name=forloop.counter0 %}
      {% endfor %}
    </div>
  </div>
{% endblock content %}